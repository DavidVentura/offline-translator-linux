import { ScrollView } from "std-widgets.slint";
import { IconButton } from "icon-button.slint";
import { LanguageItem } from "language-item.slint";
import { Language } from "language.slint";
import { AppTheme } from "theme.slint";

export component ManageLanguagesScreen {
    in property <image> back-icon;
    in property <image> download-icon;
    in property <image> delete-icon;
    in property <[Language]> installed-languages;
    in property <[Language]> available-languages;

    callback back-clicked();
    callback download-language(Language);
    callback delete-language(Language);

    Rectangle {
        background: AppTheme.background;

        VerticalLayout {
            HorizontalLayout {
                height: 56px;

                IconButton {
                    icon: root.back-icon;
                    size: 24px;
                    clicked => {
                        root.back-clicked();
                    }
                }

                Text {
                    text: "Manage Languages";
                    font-size: 20px;
                    color: AppTheme.text-primary;
                    vertical-alignment: center;
                    horizontal-stretch: 1;
                }
            }

            Rectangle {
                height: 1px;
                background: AppTheme.border;
            }

            ScrollView {
                vertical-stretch: 1;

                VerticalLayout {
                    spacing: 8px;
                    padding: 16px;

                    if installed-languages.length > 0: HorizontalLayout {
                        vertical-stretch: 0;
                        Text {
                            text: "Installed";
                            font-size: 18px;
                            font-weight: 600;
                            color: AppTheme.text-primary;
                        }
                    }

                    for lang in installed-languages: LanguageItem {
                        language: lang;
                        is-installed: true;
                        download-icon: root.download-icon;
                        delete-icon: root.delete-icon;
                        action-clicked => {
                            root.delete-language(lang);
                        }
                    }

                    if available-languages.length > 0:
                        Text {
                        vertical-stretch: 0;
                        text: "Available";
                        font-size: 18px;
                        font-weight: 600;
                        color: AppTheme.text-primary;
                    }

                    for lang in available-languages: LanguageItem {
                        language: lang;
                        is-installed: false;
                        download-icon: root.download-icon;
                        delete-icon: root.delete-icon;
                        action-clicked => {
                            root.download-language(lang);
                        }
                    }
                }
            }
        }
    }
}
